<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
	<meta name="description" content="" />
	<meta name="author" content="" />
	<title>WebORA - A Molecular View of Organic Reactions</title>
	<!-- Favicon-->
	<link rel="icon" href="assets/logo.svg" />
	<!-- Font Awesome icons (free version)-->
	<script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" crossorigin="anonymous"></script>
	<!-- Google fonts-->
	<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
	<link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet"
		type="text/css" />
	<!-- Core theme CSS (includes Bootstrap)-->
	<link href="css/styles.css" rel="stylesheet" />
	<script type="text/javascript">
		//put reactions dataset here.
		const reactions = [
			{
				name: "SN2 REACTION",
				TSframe: 500,
				writeup: "The SN2 and E2 transition states have similar energies and are therefore competitive. This SN2 trajectory shows a different approach of the methoxide to the secondary alkyl halide. In this trajectory the methoxide collides with the backside of the C-Br bond with enough energy and at the right angle to induce a new O-C bond and cleavage of the C-Br bond.",
				figDir: "assets/img/portfolio/2-Bromobutane_SN2_2-Methoxybutane.png",
				trjDir: "assets/traj/2-Bromobutane_SN2_2-Methoxybutane.sdf",
				events: {
					100: "The animation begins with the methoxide in proximity of the backside of the carbon-bromine bond.|It is that position that is required for the reaction to proceed.|The two reagents would be held in proximity of each other by the solvent used in the reaction.|The animation does not show the solvent in this case.",
					300: "Notice that the methoxide is tempted to deprotonate one of the beta hydrogens. |That would lead to the E2 reaction. There are two anti-periplanar beta hydrogens and both are acidic.",
					500: "Once the methoxide group gets into a conformation that favors |the nucleophilic attack into the unoccupied anti-bond of the C—Br bond (the LUMO),| then the reaction proceeds to give the substituted product. |Note that inversion occurs at the carbon that the methoxide attacks.|"
				}
			},
			{
				name: "E2 REACTION",
				writeup: "The SN2 and E2 transition states have similar energies and are therefore competitive. This E2 trajectory shows that the methoxide base deprotonates the beta anti-periplanar hydrogen on C-3. As this deprotonation occurs, the  bond is formed and the bromide is ejected. Observe the transition state (TS button) to examine the distances for the atoms involved in the reaction, which are: the base, the beta hydrogen, C-2, C-3, and the leaving group (the bromide). While at the TS rotate the molecule so that the deprotonated hydrogen is anti to the C—Br bond.",
				TSframe: 353,
				figDir: "assets/img/portfolio/2-Bromobutane_E2_Butene.png",
				trjDir: "assets/traj/2-Bromobutane_E2_Butene.sdf",
				events: {
					2: "The animation begins with the methoxide |in proximity of the backside of the carbon-bromine bond (compare to Reaction #1).| However, the SN2 path from this position would be hindered by the steric interaction |between the C-1 methyl group and the methyl group of the methoxide.",
					282: "Notice that the methoxide is tempted to deprotonate the beta anti-periplanar hydrogen on C-1 at step 282.",
					321: "The methoxide shifts over to the beta anti-periplanar hydrogen on C-3 at step 321.",
					357: "Then at step 357 that beta hydrogen is deprotonated. |The C—Br bond is elongated as the beta hydrogen is deprotonated.",
					365: "The alkene forms at roughly the same time as the methanol is formed and the bromide anion is released.| You can see this at step 365.",
					400: "The methanol and the bromide both move away from the alkene |because there are no attractive forces to hold them together."
				}
			},
			{
				name: "NON-PRODUCTIVE SN2 REACTION",
				figDir: "assets/img/portfolio/Chloroethane_SN2_Propionitrile.png",
				trjDir: "assets/traj/Chloroethane_SN2_Propionitrile_nonproductive.sdf",
				writeup: "This animation shows the cyanide anion and chloroethane in proximity of one another, without leading to the SN2 reaction. Compare this non-productive reaction with the productive SN2 reaction shown below it. Although the cyanide is an excellent nucleophile, the correct orientation of the collision is essential for an S N 2 reaction to proceed. The animation for the productive SN2	shows the methoxide eventually lining up with the anti-bond at the backside of the C—Cl bond. The molecules in the non-productive animation never find that proper alignment.",
				events: {
					500: "The cyanide ion never finds the proper angle for substitution to occur. |There are several factors that can lead to this lack of reaction.| One, might be that the solvent (water, for example) solvates |the nucleophile and prevents it from finding access to |the backside of the C—Cl bond.",
					1000: "Another situation that prevents the SN2 reaction, |is steric hindrance of the backside of the C—Cl bond. |You should be familiar with this situation. |Leaving groups on tertiary carbons do not undergo the SN2 reaction. |But in this case, chloroethane is a primary chloride |and sterics are not a problem. ",
					1500: "A third explanation for this non-productive outcome| is that insufficient heat is applied to the reaction."
				},
				variants: [
					{
						TSframe: 1000,
						figDir: "assets/img/portfolio/Chloroethane_SN2_Propionitrile_productive.png",
						trjDir: "assets/traj/Chloroethane_SN2_Propionitrile.sdf",
						events: {
							2: "The cyanide ion starts in a position that |is not close to the backside of the C—Cl bond. ",
							993: "After vibrating and rotating, |the cyanide anion does align with the antibond| of the C—Cl which allows for orbital mixing.| This leads to a transition state at step 993.",
							1500: "The chloride ion is not nucleophilic enough |to lead to the orbital mixing needed |for the substitution of the cyanide, |the reverse reaction."
						}
					}
				]
			},
			{
				name: "SN1 REACTION",
				figDir: "assets/img/portfolio/Iodotertbutane_Sn1_tertbutyl.png",
				trjDir: "assets/traj/Iodotertbutane_SN1_tertbutyl.sdf",
			},

			{
				name: "E1cb REACTION",
				writeup: "The E1cb reaction occurs when a strong base deprotonates a somewhat acidic hydrogen that is  to a leaving group. In this calculation, methoxide deprotonates a hydrogen that is  to a nitro group. The anion that is formed is stabilized by resonance. In a pure E1cb reaction this is a distinct intermediate. The intermediate anion (the conjugate base) then can kick out the leaving group, in this case the chloride ion.",
				figDir: "assets/img/portfolio/2-Bromobutane_SN2_2-Methoxybutane.png",
				trjDir: "assets/traj/2-Bromobutane_SN2_2-Methoxybutane.sdf",
				events: {
					5: "The animation begins with the methoxide in proximity of |the backside of the carbon-bromine bond. The two anti-periplanar |beta hydrogens are both drawn to the methoxide, which indicates that both are acidic.",
					41: "The methoxide moves toward the more acidic hydrogen in step 41. |Eventually, the anti-periplanar beta hydrogen on C-1 is deprotonated.",
					293: "The anion on C-1 isn’t fully formed until step 293. |This can be seen by watching the hybridization of the C-1 carbon. |It becomes sp2 hybridized at this point. ",
					297: "Then the chloride is dispatched from C-2 carbon at step 297.",
					350: "The chloride ion and the methanol move away from the less polar alkene product."
				}
			},
			{
				name: "ALKENE HYDROHALOGENATION",
				writeup: "The hydrohalogenation of an alkene is a reaction that typically forms an intermediate carbocation. This calculated trajectory shows the HBr approach the alkene. It is the H+ of HBr that is the electrophile. It is the  bond that is the nucleophile in the first step of the reaction. The electrophile adds to the carbon of the alkene that results in the most stable intermediate, a tertiary carbocation in this example. The bromide then adds to the give the t-butyl bromide product.",
				figDir: "assets/img/portfolio/Butene_EA_bromobutane.png",
				trjDir: "assets/traj/Butene_EA_bromobutane.sdf",
				TSframe: 300,
				events: {
					5: "The animation begins with the HBr far from the alkene. |In a non-polar solvent, like diethyl ether, the H—Br bond is covalent. |The HBr eventually approaches the alkene.",
					258: "At step #258, the H+ electrophile is roughly between both carbons of the alkene.",
					300: "As the nucleophilic alkene reacts with the electrophilic H+ |the more stable carbocation is formed. |This also frees up the bromide anion.",
					315: "The carbocation in this calculation is not long-lived. |The bromide anion is formed in close proximity and there is no solvent included in this simulation. |As a result, there is no sp2 hybridized carbocation intermediate in the calculation. |The structure at step #315 is the closest to the intermediate carbocation in this case.",
					398: "The animation has t-butyl bromide as the final product at step #398. "
				}
			},
			{
				name: "Hydroboration",
				writeup: "Hydroboration of an alkene is a reaction that does not have an intermediate. This calculated trajectory shows the BH3 approach the alkene. It is the B (boron) that is the electrophile. It is the π bond that is the nucleophile in the first step of the reaction. The electrophile adds to the carbon of the alkene that results in what would be the most stable carbocation on C-2, however the hydride from the boron transfers to C-2 before the carbocation is formed.",
				figDir: "assets/img/portfolio/Propene_EA_Propylborane.png",
				trjDir: "assets/traj/propene_EA_propylborane.sdf",
				events: {
					5: "The animation begins with the BH3 moving toward the alkene. ",
					124: "At step #124, the boron electrophile is roughly between both carbons of the alkene. ",
					137: "By step #137 the C—B bond between C-1 and the boron has begun to form.",
					163: "The hydride begins to transfer over to the C-2 carbon at step #163. |The C-2 hybridization is sp3 at this point.",
					173: "At step #173 the hydroboration is complete. |The original alkene carbons are both sp3 now and the boron is back to being sp2.",
					200: "The alkylborane rotates and vibrates freely from step #200 on. |We usually treat an alkylborane with NaOH and H2O2 in order to obtain an alcohol. |We have not animated this oxidation step. |The oxidation process occurs with no change of stereochemistry, |therefore the two steps of hydroboration and oxidation result in syn addition of H and OH to an alkene. "
				}
			},
			{
				name: "EPOXIDATION",
				writeup: "Epoxidation of an alkene is a reaction that does not have an intermediate. This calculated trajectory shows the peroxy acid, m-chloroperbenzoic acid (mCPBA), approach the alkene. It is the O (oxygen) of the peroxy acid that is the electrophile. It is the π bond that is the nucleophile in the reaction. The electrophile adds to the carbon of the alkene that results in what would be a carbocation on C-3, however the oxygen electrons add to C-3 before a carbocation is formed.",
				figDir: "assets/img/portfolio/Butene_EA_dimethyloxirane.png",
				trjDir: "assets/traj/Butene_EA_dimethyloxirane.sdf",
				TSframe: 1000,
				events: {
					5: "The animation begins with the peroxy acid moving toward the alkene. ",
					975: "At step #975, the oxygen electrophile is roughly |between both carbons of the alkene. |This equal distance is maintained all the way through |step #1081 where the epoxide to C-2 and C-3 is formed.",
					1100: "Once the epoxide is formed the carboxylic acid |moves away from the relatively non-polar 3-member ring ether."
				}
			},
			{
				name: "CARBENE CYCLOADDITION",
				figDir: "assets/img/portfolio/DiChloroCarbene_EA_DiChloroCyclopropane.png",
				trjDir: "assets/traj/DiChloroCarbene_EA_DiChloroCyclopropane.sdf",
				TSframe: 251,
			},
			{
				name: "ADN2 REACTION",
				figDir: "assets/img/portfolio/Acetone_NA_2-hydroxy-2-methylpropanenitrile.png",
				trjDir: "assets/traj/Acetone_NA_2-hydroxy-2-methylpropanenitrile.sdf",
				TSframe: 430,
				writeup: "This addition reaction trajectory shows formation of a new C-CN bond with simultaneous cleavage of the C=O π bond. However, before addition, this trajectory shows an initial unproductive collision between cyanide and the ketone. It is important to realize that many unproductive collisions occur between reacting compounds before a productive, product-forming collision occurs."
			},
			{
				name: "ACETONE REDUCTION",
				figDir: "assets/img/portfolio/Acetone_NA_Isopropanol.png",
				trjDir: "assets/traj/Acetone_NA_Isopropanol.sdf",
				TSframe: 231,
			},
			{
				name: "PROTON TRANSFER",
				figDir: "assets/img/portfolio/TFA_Methoxide.png",
				trjDir: "assets/traj/TFA_Methoxide.sdf",
			},
			{
				name: "PROTON TRANSFER",
				figDir: "assets/img/portfolio/Acetone_LDA.png",
				trjDir: "assets/traj/Acetone_LDA.sdf",
			},
			{
				name: "BUTANE CONFORMATIONS",
				figDir: "assets/img/portfolio/butane.png",
				trjDir: "assets/traj/butane.sdf",
				TSframe: 1000,
				writeup: "This trajectory the motion of butane over time. There is both rotation of C2-C3 bond and C1-C2 bonds, although not at the exact same time."
			},
			{
				name: "CARBOCATION REARRANGEMENT",
				figDir: "assets/img/portfolio/MethylPentylCation.png",
				trjDir: "assets/traj/MethylPentylCation.sdf",
				variants: [
					{
						figDir: "assets/img/portfolio/Iodotertbutane_Sn1_tertbutyl.png",
						trjDir: "assets/traj/Carbocation_gen.sdf",
					}
				]
			},
			{
				name: "DIELS-ALDER REACTION",
				figDir: "assets/img/portfolio/butadiene_acrylate_DA_cyclohexenecarboxylate.png",
				trjDir: "assets/traj/butadiene_acrylate_DA_cyclohexenecarboxylate.sdf",
				TSframe: 1000,
				writeup: "The Diels-Alder reaction is an example of a highly synchronous one-step reaction. Click on the TS button and measure the newly forming C-C sigma bond lengths. Track these bond lengths before and after the transition state."
			},
			{
				name: "ELECTROCYCLIC RING CLOSURE",
				figDir: "assets/img/portfolio/Butadiene_TS_Cyclobutene.png",
				trjDir: "assets/traj/Butadiene_TS_Cyclobutene.sdf",
				TSframe: 871,
				writeup: "This trajectory shows the cyclization of 1,3-butadiene to cyclobutene. This trajectory first shows the rapid interconversion between s-trans and s-cis conformations of 1,3-butadiene before achieving the transition state for C-C bond formation. Move the trajectory reverse and forward from the transition state to see the conrotatory motion."
			},
			{
				name: "COPE REARRANGEMENT",
				figDir: "assets/img/portfolio/hexadiene_cope_hexadiene.png",
				trjDir: "assets/traj/hexadiene_cope_hexadiene.sdf",
				TSframe: 1000,
				writeup: "This trajectory shows the conformational change required to achieve the highly organized [3,3] sigmatropic rearrangement transition state. Press the TS button to look at the transition-state structure, which has a chair conformation. After the transition state the structure unwraps through another conformational change."
			},
		]
	</script>
</head>

<body id="page-top">
	<!-- Navigation-->
	<nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id="mainNav">
		<div class="container">
			<a class="navbar-brand" href="#page-top">WebORA</a>
			<button class="navbar-toggler text-uppercase font-weight-bold bg-primary text-white rounded" type="button"
				data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive"
				aria-expanded="false" aria-label="Toggle navigation">
				Menu
				<i class="fas fa-bars"></i>
			</button>
			<div class="collapse navbar-collapse" id="navbarResponsive">
				<ul class="navbar-nav ms-auto">
					<li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded"
							href="#Reactions">Organic Reactions</a></li>
					<li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded"
							href="#details">Trajectory Details</a></li>
					<li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="#about">About
							US</a></li>
					<li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded"
							href="#contact">Contact</a></li>
				</ul>
			</div>
		</div>
	</nav>
	<!-- Masthead -->
	<header class="masthead bg-primary text-white text-center">
		<p class="masthead-notice fst-italic">This website can be cited as:</p>
		<p class="masthead-notice fst-italic">Chen, S.; Fleming, S. A.; Ess, D. H. WebORA, 2021,
			https://webora.netlify.app/.</p>
		<p class="masthead-notice text-center">Notice: webORA is a web platform to view trajectories as preparation for
			the iPhone application iORA. </p>
		<p class="masthead-notice text-center">If you would like to view a pre-release beta version of iORA download the
			testflight application and then use the following link: </p>
		<a class="masthead-notice text-center" style="color:inherit"
			href="https://testflight.apple.com/join/FEW77U8m">https://testflight.apple.com/join/FEW77U8m</a>
		<div class="container d-flex align-items-center flex-column">
			<!-- Masthead Avatar Image-->
			<!-- <img class="masthead-avatar mb-5" src="assets\img\logo.light.png" alt="..." /> -->
			<!-- Masthead Heading-->
			<br />
			<br />
			<br />
			<br />
			<br />
			<br />
			<br />
			<h1 class="masthead-heading text-uppercase mb-0">WebORA</h1>
			<!-- Icon Divider-->
			<div class="divider-custom divider-light">
				<!--
                    <div class="divider-custom-line"></div>
                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                    <div class="divider-custom-line"></div>
                    -->
			</div>
			<!-- Masthead Subheading-->
			<p class="masthead-subheading font-weight-light mb-0">Organic Reaction Trajectories</p>
			<br />
			<br />
			<br />
			<br />
			<br />
			<br />
			<br />
			<br />
			<br />
			<br />
			<p class="col-lg-4 text-black text-center fst-italic">How to use?</p>
			<p class="col-lg-4 text-black text-center fst-italic">1. Click images and play button to activate the
				animations.</p>
			<p class="col-lg-4 text-black text-center fst-italic">2. Move molecules with left mouse button and zoom
				in/out with the mouse wheel.</p>
			<p class="col-lg-4 text-black text-center fst-italic">3. Double click to measure bonds/angles/dihedrals and
				double click again to end the measurement.</p>
			<p class="col-lg-4 text-black text-center fst-italic"><a style="color:inherit"
					href="http://biomodel.uah.es/en/DIY/Jmol/help/inicio.en.htm">More...</a></p>
		</div>
	</header>
	<!-- Portfolio Section-->
	<section class="page-section portfolio" id="Reactions">
		<div class="container">
			<!-- Portfolio Section Heading-->
			<h2 class="page-section-heading text-center text-uppercase text-secondary mb-0">Organic Reactions</h2>
			<br />
			<br />
			<!-- Portfolio Grid Items-->
			<div class="row justify-content-center">
				<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
				<script type="text/javascript">
					for (let i = 0; i < reactions.length; i++) {
						let html = `<div class="col-md-6 col-lg-4 mb-5">
							<div class="portfolio-item mx-auto" data-bs-toggle="modal" data-bs-target="#portfolioModal${i}">
								<h3>${reactions[i].name}							</h3>
								<div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
									<div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
								</div>
								<img class="img-fluid" src="${reactions[i].figDir}" alt="..." />
							</div>
						</div>`;
						document.write(html);
					}
				</script>
			</div>
		</div>
	</section>
	<!-- Details Section-->
	<section class="page-section bg-primary text-white mb-0" id="details">
		<div class="container">
			<!-- Details Section Heading-->
			<h2 class="page-section-heading text-center text-uppercase text-white">Trajectory Details</h2>
			<br />
			<br />
			<!-- Details Section Content-->
			<div class="row">
				<div class="lg-4 ms-auto text-center">
					<p class="lead">
						The direct dynamics trajectories presented are displayed using JSmol.
						Each trajectory was generated using a density functional theory transition-state structure
						followed
						by vibrational normal mode sampling and propagation in forward and reverse directions using
						mass-weighted
						velocities with the Gaussian 16 program. Generally, a propagation step size of 0.5 femtosecond
						was used.
					</p>
				</div>
			</div>
		</div>
	</section>
	<!-- About Section-->
	<section class="page-section" id="about">
		<div class="container">
			<!-- About Section Heading-->
			<h2 class="page-section-heading text-center text-uppercase text-secondary mb-0">About Us</h2>
			<br />
			<br />
			<!-- About Section Content-->
			<div class="row">
				<div class="col-lg-4 ms-auto text-secondary">
					<p class="lead">By adhering to accepted guidelines and standards for accessibility and usability
						webORA is committed to providing a website that is accessible to the widest possible audience.
						This work is the result of a Brigham Young University-Temple University collaboration with the
						goal of providing organic reaction animations based on physically correct direct dynamics
						simulations.</p>
				</div>
				<div class="col-lg-4 me-auto text-secondary">
					<p class="lead">Prof. Ess, Prof. Fleming, Dr. Shusen Chen, and undergraduate students Allyson Yu and
						Josh Schneider have contributed to creating webORA. The development of webORA is supported by
						the US National Science Foundation: DUE-2121023.</p>
				</div>
			</div>
		</div>
	</section>
	<!-- Contact Section-->
	<section class="page-section bg-primary text-white mb-0" id="contact">
		<div class="container">
			<!-- Contact Section Heading-->
			<h2 class="page-section-heading text-center text-uppercase mb-0">Contact Us</h2>
			<br />
			<br />
			<div class="lg-4 ms-auto text-center">
				<p class="lead">For more information, please contact Prof. Dan Ess (dhe@chem.byu.edu) or Prof. Steven
					Fleming (sfleming@temple.edu).</p>
			</div>
			<h5> <a href="https://forms.gle/3SHWJLsFzEHbUnLi8" style="color:white">Feedback Form</a> </h5>
		</div>
		</div>
	</section>
	<!-- Footer-->
	<footer class="footer text-center">
		<div class="container">
			<div class="row">
				<!-- Footer Location-->
				<div class="col-lg-4 mb-5 mb-lg-0">
					<h4 class="text-uppercase mb-4">Support</h4>
					<p class="lead mb-0">
						The development of webORA and iORA are supported by the US National Science Foundation:
						DUE-2121023
					</p>
				</div>
				<!-- Footer Social Icons-->
				<div class="col-lg-4 mb-5 mb-lg-0">
					<h4 class="text-uppercase mb-4">Around the Web</h4>
					<a class="btn btn-outline-light btn-social mx-1" href="#!"><i
							class="fab fa-fw fa-facebook-f"></i></a>
					<a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-twitter"></i></a>
					<a class="btn btn-outline-light btn-social mx-1" href="#!"><i
							class="fab fa-fw fa-linkedin-in"></i></a>
					<a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-dribbble"></i></a>
				</div>
				<!-- Footer About Text-->
				<div class="col-lg-4">
					<h4 class="text-uppercase mb-4">About Webora</h4>
					<p class="lead mb-0">
						WebORA uses Freelance, a MIT licensed Bootstrap theme created by
						<a href="http://startbootstrap.com">Start Bootstrap</a>
					</p>
				</div>
			</div>
		</div>
	</footer>
	<!-- Copyright Section-->
	<div class="copyright py-4 text-center text-white">
		<div class="container"><small>Copyright &copy; WebORA 2021</small></div>
	</div>
	<!-- Portfolio Modals-->
	<script type="text/javascript">
		for (let i = 0; i < reactions.length; i++) {
			let variantHtml = "";
			//add variant reaction
			for (let j = 0; reactions[i].variants && j < reactions[i].variants.length; j++) {
				let variantTsBotton = "";
				if (reactions[i].variants[j].TSframe) variantTsBotton = `<span class="input-group-text"><a class="btn btn-secondary btn-sm" href="javascript: Jmol.script(jmol${i}_${j}, 'frame ${reactions[i].variants[j].TSframe}');" title="Transtion State">TS</a></span>`;
				variantHtml += `<div id="appletplace${i}_${j}" style="width:100%;height:100%;background-color:white"></div>
				<ul class="list-group">
					<li class="list-group-item">
						<div class="input-group">
							<span class="input-group-text"><input id="switch${i}_${j}" type="checkbox" class="switch switch-anim" onchange="javascript:if (this.checked) {Jmol.script(jmol${i}_${j},'animation resume');} else {Jmol.script(jmol${i}_${j},'animation pause');}"/></span>
							<span class="form-control"><input id="timelineRange${i}_${j}" type="range" class="form-range" min="1" max="600" oninput="javascript:Jmol.script(jmol${i}_${j}, 'frame ' + this.value); timelineAmount${i}_${j}.value=this.value" /></span>
							<span class="input-group-text"><input id="timelineAmount${i}_${j}" type="number" min="1" max="600" oninput="javascript:Jmol.script(jmol${i}_${j}, 'frame ' + this.value); timelineRange${i}_${j}.value=this.value" /></span>
							${variantTsBotton}
							<span class="input-group-text">
								<div class="dropdown">
									<button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenuButton${i}_${j}" data-bs-toggle="dropdown" aria-expanded="false" title="fps">Speed</button>
									<ul class="dropdown-menu" aria-labelledby="dropdownMenuButton${i}_${j}">
										<input id="fpsRange${i}_${j}" type="range" min="1" max="60" value="30" class="form-range" oninput="javascript:Jmol.script(jmol${i}_${j}, 'animation fps ' + this.value);" />
									</ul>
								</div>
							</span>
						</div>
					</li>
				<li class="list-group-item"><input id="toggle${i}_${j}" class="form-check-input" type="checkbox"/><label class="form-check-label" for="toggle${i}_${j}">Walk me through the reaction</label></li>
				</ul>`
			}
			//add main reaction
			let tsBotton = "";
			if(reactions[i].TSframe) {
				tsBotton = `<span class="input-group-text"><a class="btn btn-secondary btn-sm" href="javascript: Jmol.script(jmol${i}, 'frame ${reactions[i].TSframe}');" title="Transtion State">TS</a></span>`;
			}
			const html = `<div class="portfolio-modal modal fade" id="portfolioModal${i}" tabindex="-1" aria-labelledby="portfolioModal${i}" aria-hidden="true">
				<div class="modal-dialog modal-fullscreen">
					<div class="modal-content">
						<div class="modal-header border-0"><button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button></div>
							<div class="modal-body text-center pb-5">
								<div class="container">
									<div class="row justify-content-center">
										<div class="col-lg-8">
											<h2 class="portfolio-modal-title text-secondary text-uppercase mb-0">${reactions[i].name}</h2>
											<div id="appletplace${i}" style="width:100%;height:100%;background-color:white"></div>
											<ul class="list-group">
												<li class="list-group-item">
													<div class="input-group">
														<span class="input-group-text"><input id="switch${i}" type="checkbox" class="switch switch-anim" onchange="javascript:if (this.checked) {Jmol.script(jmol${i}, 'animation resume');} else {Jmol.script(jmol${i}, 'animation pause');}"/></span>
														<span class="form-control"><input id="timelineRange${i}" type="range" class="form-range" min="1" max="600" oninput="javascript:Jmol.script(jmol${i}, 'frame ' + this.value); timelineAmount${i}.value=this.value" /></span>
														<span class="input-group-text"><input id="timelineAmount${i}" type="number" min="1" max="600" oninput="javascript:Jmol.script(jmol${i}, 'frame ' + this.value); timelineRange${i}.value=this.value" /></span>
														${tsBotton}
														<span class="input-group-text">
															<div class="dropdown">
																<button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenuButton${i}" data-bs-toggle="dropdown" aria-expanded="false" title="fps">Speed</button>
																<ul class="dropdown-menu" aria-labelledby="dropdownMenuButton${i}">
																	<input id="fpsRange${i}" type="range" min="1" max="60" value="30" class="form-range" oninput="javascript:Jmol.script(jmol${i}, 'animation fps ' + this.value);" />
																</ul>
															</div>
														</span>
													</div>
												</li>
												<li class="list-group-item"><input id="toggle${i}" class="form-check-input" type="checkbox"/><label class="form-check-label" for="toggle${i}">Walk me through the reaction</label></li>
											</ul>
											${variantHtml}
											<div class="card"><div class="card-body"><p class="card-text">${reactions[i].writeup}</p></div></div>
											<br></br>
											<a class="btn btn-primary" href="javascript:Jmol.script(jmol${i}, 'animation off')" data-bs-dismiss="modal">
												<i class="fas fa-times fa-fw"></i>
												Close Window
											</a>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>`;
			document.write(html);
		}
	</script>
	<!-- Bootstrap core JS-->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>
	<!-- Core theme JS-->
	<script src="js/scripts.js"></script>
	<!-- Put JSmol script here -->
	<script src="https://3Dmol.org/build/3Dmol-min.js" async></script>
	<script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
	<script type="text/javascript" src="js/JSmol.min.js"></script>

	<script type="text/javascript">
		update = function (app, _, fileNo, modelNo, _, lastNo) {
			let index = app.match(/\d+(_\d+)?/g);
			// console.log(eval('jmol' + index));
			document.getElementById('timelineAmount' + index).value = modelNo;
			document.getElementById('timelineRange' + index).value = modelNo;
			document.getElementById('timelineAmount' + index).max = lastNo - fileNo * 1000000;
			document.getElementById('timelineRange' + index).max = lastNo - fileNo * 1000000;
			const splitedIndex = index[0].split('_'); 
			if(splitedIndex.length == 1) {
				for (let step in reactions[index].events) {
					if (modelNo == step && document.getElementById('toggle' + index).checked) {
						Jmol.script(eval('jmol' + index), "echo " + reactions[index].events[step]);
						Jmol.script(eval('jmol' + index), 'animation pause');
						document.getElementById('switch' + index).checked = false;
					}
				}
			}
			else {
				for (let step in reactions[splitedIndex[0]].variants[splitedIndex[1]].events) {
					if (modelNo == step && document.getElementById('toggle' + index).checked) {
						Jmol.script(eval('jmol' + index), "echo " + reactions[splitedIndex[0]].variants[splitedIndex[1]].events[step]);
						Jmol.script(eval('jmol' + index), 'animation pause');
						document.getElementById('switch' + index).checked = false;
					}
				}
			};
		}
		$(document).ready(function () {
			for (let i = 0; i < reactions.length; i++) {
				const info = {
					width: "100%",
					height: "100%",
					debug: false,
					color: "white",
					addSelectionOptions: false,
					serverURL: "https://chemapps.stolaf.edu/jmol/jsmol/php/jsmol.php",
					use: "HTML5",
					coverImage: reactions[i].figDir,//"data/1hxw.png",        // initial image instead of applet
					coverScript: "",	// special script for click of cover image (otherwise equal to script)
					deferApplet: true,                  // wait to load applet until click
					deferUncover: false,                 // wait to uncover applet until script completed
					jarPath: "java",
					j2sPath: "js/j2s",
					jarFile: "JmolApplet.jar",
					isSigned: false,
					//disableJ2SLoadMonitor: true,
					//disableInitialConsole: true,
					//readyFunction: jmol_isReady,
					//defaultModel: "$dopamine",
					script: "load " + reactions[i].trjDir + ";animation mode loop;animation off;animation fps 30; set measurements angstroms; set AnimFrameCallback 'update';set echo bottom center; color echo [x2c3e50]; echo Move molecules with left mouse button and zoom in/out with the mouse wheel.|Double click to measure bonds/angles/dihedrals |and double click again to end the measurement."
				}
				$("#appletplace" + i).html(Jmol.getAppletHtml("jmol" + i, info));
				for (let j = 0; reactions[i].variants && j < reactions[i].variants.length; j++) {
					const info = {
						width: '100%',
						height: "100%",
						debug: false,
						color: "white",
						addSelectionOptions: false,
						serverURL: "https://chemapps.stolaf.edu/jmol/jsmol/php/jsmol.php",
						use: "HTML5",
						coverImage: reactions[i].variants[j].figDir,        // initial image instead of applet
						coverScript: "",	// special script for click of cover image (otherwise equal to script)
						deferApplet: true,                  // wait to load applet until click
						deferUncover: false,                 // wait to uncover applet until script completed
						jarPath: "java",
						j2sPath: "js/j2s",
						jarFile: "JmolApplet.jar",
						isSigned: false,
						//disableJ2SLoadMonitor: true,
						//disableInitialConsole: true,
						//readyFunction: jmol_isReady,
						//defaultModel: "$dopamine",
						script: "load " + reactions[i].variants[j].trjDir + ";animation mode loop;animation off;animation fps 30; set measurements angstroms; set AnimFrameCallback 'update';set echo bottom center; color echo [x2c3e50]; echo Move molecules with left mouse button and zoom in/out with the mouse wheel.|Double click to measure bonds/angles/dihedrals |and double click again to end the measurement."
					}
					$("#appletplace" + i + "_" + j).html(Jmol.getAppletHtml("jmol" + i + "_" + j, info));
				}
			}
		})
	</script>
</body>

</html>